CREATE EXTENSION IF NOT EXISTS pgcrypto;
CREATE TABLE "public"."transactions"("tx_id" uuid NOT NULL DEFAULT gen_random_uuid(), "from" uuid NOT NULL, "to" uuid NOT NULL, "loan_id" uuid NOT NULL, "amount" float8 NOT NULL, "status" text NOT NULL DEFAULT 'initiated', "comment" text, "data" jsonb DEFAULT jsonb_build_object(), PRIMARY KEY ("tx_id") , FOREIGN KEY ("from") REFERENCES "public"."user"("id") ON UPDATE restrict ON DELETE restrict, FOREIGN KEY ("to") REFERENCES "public"."user"("id") ON UPDATE restrict ON DELETE restrict, FOREIGN KEY ("loan_id") REFERENCES "public"."loan_requests"("request_id") ON UPDATE restrict ON DELETE restrict);
