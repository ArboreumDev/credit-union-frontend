CREATE EXTENSION IF NOT EXISTS pgcrypto;
CREATE TABLE "public"."update_log"("type" text NOT NULL, "date" timestamptz NOT NULL DEFAULT now(), "update_id" uuid NOT NULL DEFAULT gen_random_uuid(), "loan_id" uuid NOT NULL, "new_principal_remain" float8 NOT NULL, "new_interest_accrued" float8 NOT NULL, "new_penalty_accrued" float8 NOT NULL, "new_state" text NOT NULL, "new_next_payment_due_date" date NOT NULL, "new_next_payment_amount" float8 NOT NULL, "repayment_id" uuid NOT NULL, PRIMARY KEY ("update_id") , FOREIGN KEY ("loan_id") REFERENCES "public"."loan"("loan_id") ON UPDATE restrict ON DELETE restrict);
